/**
 ******************************************************************************
 * @file           : main.c
 * @author         : Auto-generated by STM32CubeIDE
 * @brief          : Main program body
 ******************************************************************************
 * @attention
 *
 * Copyright (c) 2025 STMicroelectronics.
 * All rights reserved.
 *
 * This software is licensed under terms that can be found in the LICENSE file
 * in the root directory of this software component.
 * If no LICENSE file comes with this software, it is provided AS-IS.
 *
 ******************************************************************************
 */

#include <stdint.h>

#if !defined(__SOFT_FP__) && defined(__ARM_FP)
  #warning "FPU is not initialized, but the project is compiling for an FPU. Please initialize the FPU before use."
#endif

/**
 * Refer datasheet and calculate gpio registers address and offset
 */

/* Address of GPIO registers */

/* Address of clock control register */
uint32_t *p_gpio_clk_ctrl_reg = (uint32_t*)0x40023830;

/* Address of GPIO Port D mode register */
uint32_t *p_port_d_mode_reg = (uint32_t*)0x40020c00;

/* Address of GPIO Port D output register */
uint32_t *p_port_d_out_reg = (uint32_t*)0x40020c14;


int main(void)
{

	/*Enabling the clock for GPIO peripheral */

	/* Storing the value of gpio clock control register in temp */
	uint32_t gpio_clk_ctrl_reg_tmp = *p_gpio_clk_ctrl_reg;

	/* Enabling the clock for GPIO_D peripheral in the AHB1ENR */
	gpio_clk_ctrl_reg_tmp  |= 0x08;

    /*Writing back the value to the register*/
	*p_gpio_clk_ctrl_reg  = gpio_clk_ctrl_reg_tmp;


	/* Setting the mode of GPIO to output */

	/* Storing the value of GPIO Port D mode register in temp */
	uint32_t p_port_d_mode_reg_tmp = *p_port_d_mode_reg;

	/*Clearing the 24th and 25th bit positions (CLEAR)``*/
	p_port_d_mode_reg_tmp &= 0xFCFFFFFF;

    /*Setting the 24th bit position (SET) */
	p_port_d_mode_reg_tmp |= 0x01000000;

	/*Writing back the value to the register*/
	*p_port_d_mode_reg = p_port_d_mode_reg_tmp;



	/* Storing the value of GPIO Port D output register in temp */
	uint32_t p_port_d_out_reg_tmp = *p_port_d_out_reg;

    /*Setting the 12th bit position (SET) */
	p_port_d_out_reg_tmp |= 0x1000;

	/*Writing back the value to the register*/
	*p_port_d_out_reg = p_port_d_out_reg_tmp;

	/* Loop forever */
	for(;;);
}
